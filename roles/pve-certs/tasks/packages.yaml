---
- name: Ensure all required packages are installed
  apt:
    name: "{{ item.name }}"
    state: "{{ item.state }}"
  with_items:
    - name: python3-pip
      state: present
    - name: python3-openssl
      state: absent

- name: Ensure all required python packages are installed
  ansible.builtin.pip:
    name: "{{ item }}"
  with_items:
    - pyopenssl
    - cryptography
