---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: minecraft
  namespace: minecraft
spec:
  chart:
    spec:
      # renovate: registryUrl=https://itzg.github.io/minecraft-server-charts/
      chart: minecraft
      version: 3.1.4
  values:
    image: itzg/minecraft-server
    imageTag: latest
    minecraftServer:
      motd: "Welcome to Minecraft! [dev]"
    serviceAnnotations:
      external-dns.alpha.kubernetes.io/hostname: minecraft.dev.mrv.thebends.org.
  valuesFrom:
    - kind: ConfigMap
      name: network-ips
      namespace: services
      valuesKey: minecraft
      targetPath: minecraftServer.loadBalancerIP
