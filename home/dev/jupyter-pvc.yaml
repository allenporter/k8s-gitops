---
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshotContent
metadata:
  finalizers:
  - snapshot.storage.kubernetes.io/volumesnapshotcontent-bound-protection
  name: manual-snapshot-2022-01-28-14-48
spec:
  deletionPolicy: Delete
  driver: rook-ceph.rbd.csi.ceph.com
  source:
    snapshotHandle: 0001-0009-rook-ceph-0000000000000002-be24cee5-9234-11ed-b651-da638e7592c7
  volumeSnapshotClassName: csi-rbdplugin-snapclass
  volumeSnapshotRef:
    name: home-assistant-snapshot-0
    namespace: jupyter
---
# This snapshot exists so we can read the home assistant sql-lite database
# from Jupyter like https://data.home-assistant.io/
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshot
metadata:
  name: home-assistant-snapshot-0
  namespace: jupyter
spec:
  source:
    volumeSnapshotContentName: manual-snapshot-2022-01-28-14-48
---
# Mount the snapshot as a PVC for jupyter
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: jupyter-home-assistant-storage-0
  namespace: jupyter
spec:
  storageClassName: rook-ceph-block
  dataSource:
    name: home-assistant-snapshot-0
    kind: VolumeSnapshot
    apiGroup: snapshot.storage.k8s.io
  resources:
    requests:
      storage: 25Gi
  accessModes:
  - ReadOnlyMany
