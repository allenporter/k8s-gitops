---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: tf-controller
  namespace: tf-controller
spec:
  releaseName: tf-controller
  chart:
    spec:
      chart: tf-controller
      version: 0.11.0
  values:
    extraEnv:
    - name: GOOGLE_APPLICATION_CREDENTIALS
      value: /config/gcloud-service-account.json
    volumes:
    - name: tf-gcloud-secret
      secret:
        secretName: tf-gcloud-secret
    volumeMounts:
    - name: tf-gcloud-secret
      mountPath: /config/
      readOnly: true
