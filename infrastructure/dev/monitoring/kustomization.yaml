---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: rook-ceph
resources:
  - prometheus-rule.yaml
configMapGenerator:
  # The ceph subdirectory is an included GitRepository that points to
  # https://github.com/ceph/ceph/tree/master/monitoring
  - name: ceph-default-alerts
    files:
      - rules=../../../ceph-monitoring/prometheus/alerts/ceph_default_alerts.yml
replacements:
  - source:
      kind: ConfigMap
      name: ceph-default-alerts
      fieldPath: data.rules
    targets:
      - select:
          kind: PrometheusRule
          name: ceph-default-rules
        fieldPaths:
          - spec
