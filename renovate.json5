{
  "extends": [
    "config:base",
  ],
  "timezone": "America/Los_Angeles",
  "assignees": ["allenporter"],
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "Renovate Dashboard",
  "regexManagers": [
    {
      "fileMatch": [".+\\.yaml$"],
      "matchStrings": [
        "registryUrl=(?<registryUrl>.*?)\n *chart: (?<depName>.*?)\n *version: (?<currentValue>.*)\n",
      ],
      "datasourceTemplate": "helm",
    },
  ],
  "helm-values": {
    // Match value files in HelmReleases
    "fileMatch": [".*(release|values|components)\\.yaml$"],
  },
  "packageRules": [
    {
      "description": "dev: Minor updates are automatic",
      "matchPaths": ["/dev/"],
      "automerge": true,
      "automergeType": "branch",
      "additionalBranchPrefix": "dev-",
      "matchUpdateTypes": ["minor", "patch", "digest"],
    },
    {
      "description": "dev: Major packages updated weekly",
      "matchPaths": ["/dev/"],
      "extends": ["schedule:weekends"],
      "additionalBranchPrefix": "dev-",
      "matchUpdateTypes": ["major"],
    },
     {
      "description": "prod: Patches are automatic after 1 day",
      "matchPaths": ["/prod/", "/infrastructures/"],
      "automerge": true,
      "automergeType": "branch",
      "stabilityDays": 1,
      "additionalBranchPrefix": "prod-",
      "matchUpdateTypes": ["patch"],
    },
    {
      "description": "prod: Packages updated weekly",
      "matchPaths": ["/prod/", "/infrastructure/"],
      "extends": ["schedule:weekends"],
      "additionalBranchPrefix": "prod-",
      "stabilityDays": 1,
      "matchUpdateTypes": ["major", "minor"],
    },
  ],
}
