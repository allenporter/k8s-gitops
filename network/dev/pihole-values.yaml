---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: pihole
  namespace: pihole
spec:
  chart:
    spec:
      # renovate: registryUrl=https://mojo2600.github.io/pihole-kubernetes/
      chart: pihole
      version: 2.5.7
  values:
    serviceDns:
      loadBalancerIP: ${PIHOLE_IP}
    serviceWeb:
      loadBalancerIP: ${PIHOLE_IP}
    virtualHost: pihole.${DOMAIN}
    ingress:
      annotations:
        external-dns.alpha.kubernetes.io/hostname: pihole.${DOMAIN}.
        external-dns.alpha.kubernetes.io/target: prx02.${DOMAIN}.
      hosts:
        - pihole.${DOMAIN}
      tls:
        - secretName: pihole-tls
          hosts:
            - pihole.${DOMAIN}
