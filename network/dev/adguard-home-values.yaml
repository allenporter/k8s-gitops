---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: adguard-home
  namespace: adguard-home
spec:
  chart:
    spec:
      chart: adguard-home
      version: 5.2.0
  values:
    service:
      dns-tcp:
        loadBalancerIP: 10.10.24.12
      dns-udp:
        loadBalancerIP: ${ADGUARD_HOME_IP}

    ingress:
      main:
        annotations:
          external-dns.alpha.kubernetes.io/hostname: adguard-home.dev.mrv.thebends.org.
          external-dns.alpha.kubernetes.io/target: prx02.dev.mrv.thebends.org.
        hosts:
          - host: adguard-home.dev.mrv.thebends.org
            paths:
              - path: /
                pathType: Prefix
        tls:
          - secretName: adguard-home-tls
            hosts:
              - adguard-home.dev.mrv.thebends.org
